{
  "info": {
    "name": "Food Delivery System - RBAC API",
    "description": "Complete API collection for Food Ordering Platform with Role-Based Access Control (RBAC) and Location-Based Filtering\n\nAssignment for: Slooze/Outlier\nTech Stack: NestJS + PostgreSQL + Prisma\n\nTest Users:\n- Admin (America): nick.fury@avengers.com / admin123\n- Manager (India): captain.marvel@avengers.com / manager123\n- Manager (America): captain.america@avengers.com / manager123\n- Member (India): thanos@avengers.com / member123\n- Member (India): thor@avengers.com / member123\n- Member (America): travis@avengers.com / member123",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Login - Admin (Nick Fury)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"nick.fury@avengers.com\",\n  \"password\": \"admin123\"\n}"
            },
            "url": {
              "raw": "http://localhost:3001/api/auth/login",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "auth", "login"]
            }
          }
        },
        {
          "name": "Login - Manager India (Captain Marvel)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"captain.marvel@avengers.com\",\n  \"password\": \"manager123\"\n}"
            },
            "url": {
              "raw": "http://localhost:3001/api/auth/login",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "auth", "login"]
            }
          }
        },
        {
          "name": "Login - Manager America (Captain America)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"captain.america@avengers.com\",\n  \"password\": \"manager123\"\n}"
            },
            "url": {
              "raw": "http://localhost:3001/api/auth/login",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "auth", "login"]
            }
          }
        },
        {
          "name": "Login - Member India (Thanos)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"thanos@avengers.com\",\n  \"password\": \"member123\"\n}"
            },
            "url": {
              "raw": "http://localhost:3001/api/auth/login",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "auth", "login"]
            }
          }
        },
        {
          "name": "Register New User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"newuser@example.com\",\n  \"password\": \"password123\",\n  \"name\": \"New User\",\n  \"role\": \"MEMBER\",\n  \"country\": \"INDIA\"\n}"
            },
            "url": {
              "raw": "http://localhost:3001/api/auth/register",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "auth", "register"]
            }
          }
        },
        {
          "name": "Get Profile (Protected)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:3001/api/auth/profile",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "auth", "profile"]
            }
          }
        }
      ]
    },
    {
      "name": "Users (RBAC: Admin CRUD, Manager View)",
      "item": [
        {
          "name": "Get All Users (Admin, Manager)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:3001/api/users",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "users"]
            }
          }
        },
        {
          "name": "Get User by ID (Admin, Manager)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:3001/api/users/1",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "users", "1"]
            }
          }
        },
        {
          "name": "Create User (Admin Only)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin.created@example.com\",\n  \"password\": \"password123\",\n  \"name\": \"Admin Created User\",\n  \"role\": \"MEMBER\",\n  \"country\": \"INDIA\"\n}"
            },
            "url": {
              "raw": "http://localhost:3001/api/users",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "users"]
            }
          }
        },
        {
          "name": "Update User (Admin Only)",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Name\",\n  \"role\": \"MANAGER\"\n}"
            },
            "url": {
              "raw": "http://localhost:3001/api/users/1",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "users", "1"]
            }
          }
        },
        {
          "name": "Delete User (Admin Only)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:3001/api/users/1",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "users", "1"]
            }
          }
        }
      ]
    },
    {
      "name": "Restaurants (Location Filtering)",
      "item": [
        {
          "name": "Get All Restaurants (Filtered by Country)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:3001/api/restaurants",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "restaurants"]
            },
            "description": "Admin sees all (India + America). Manager/Member see only their country."
          }
        },
        {
          "name": "Get Restaurant by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:3001/api/restaurants/1",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "restaurants", "1"]
            }
          }
        },
        {
          "name": "Create Restaurant (Admin Only)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"New Restaurant\",\n  \"description\": \"Amazing food\",\n  \"country\": \"INDIA\",\n  \"imageUrl\": \"https://example.com/image.jpg\"\n}"
            },
            "url": {
              "raw": "http://localhost:3001/api/restaurants",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "restaurants"]
            }
          }
        },
        {
          "name": "Update Restaurant (Admin Only)",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Restaurant Name\",\n  \"description\": \"Updated description\"\n}"
            },
            "url": {
              "raw": "http://localhost:3001/api/restaurants/1",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "restaurants", "1"]
            }
          }
        },
        {
          "name": "Delete Restaurant (Admin Only)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:3001/api/restaurants/1",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "restaurants", "1"]
            }
          }
        }
      ]
    },
    {
      "name": "Menu Items",
      "item": [
        {
          "name": "Get All Menu Items",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:3001/api/menu-items",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "menu-items"]
            }
          }
        },
        {
          "name": "Get Menu Items by Restaurant",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:3001/api/menu-items?restaurantId=1",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "menu-items"],
              "query": [
                {
                  "key": "restaurantId",
                  "value": "1"
                }
              ]
            }
          }
        },
        {
          "name": "Get Menu Item by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:3001/api/menu-items/1",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "menu-items", "1"]
            }
          }
        },
        {
          "name": "Create Menu Item (Admin Only)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"restaurantId\": 1,\n  \"name\": \"New Dish\",\n  \"description\": \"Delicious new item\",\n  \"price\": 299.99,\n  \"category\": \"MAIN_COURSE\",\n  \"isAvailable\": true\n}"
            },
            "url": {
              "raw": "http://localhost:3001/api/menu-items",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "menu-items"]
            }
          }
        },
        {
          "name": "Update Menu Item (Admin Only)",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"price\": 349.99,\n  \"isAvailable\": false\n}"
            },
            "url": {
              "raw": "http://localhost:3001/api/menu-items/1",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "menu-items", "1"]
            }
          }
        },
        {
          "name": "Delete Menu Item (Admin Only)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:3001/api/menu-items/1",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "menu-items", "1"]
            }
          }
        }
      ]
    },
    {
      "name": "Orders (CORE RBAC - Checkout/Cancel Restricted)",
      "item": [
        {
          "name": "Create Order (All Roles)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"restaurantId\": 1\n}"
            },
            "url": {
              "raw": "http://localhost:3001/api/orders",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "orders"]
            },
            "description": "Creates an empty order in CART status"
          }
        },
        {
          "name": "Add Item to Order (All Roles)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"menuItemId\": 1,\n  \"quantity\": 2\n}"
            },
            "url": {
              "raw": "http://localhost:3001/api/orders/1/items",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "orders", "1", "items"]
            },
            "description": "Add items to cart"
          }
        },
        {
          "name": "Update Item Quantity (All Roles)",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"quantity\": 3\n}"
            },
            "url": {
              "raw": "http://localhost:3001/api/orders/1/items/1",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "orders", "1", "items", "1"]
            }
          }
        },
        {
          "name": "Remove Item from Order (All Roles)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:3001/api/orders/1/items/1",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "orders", "1", "items", "1"]
            }
          }
        },
        {
          "name": "Checkout Order (Admin, Manager ONLY)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"paymentMethodId\": 1\n}"
            },
            "url": {
              "raw": "http://localhost:3001/api/orders/1/checkout",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "orders", "1", "checkout"]
            },
            "description": "RBAC TEST: Member will get 403 Forbidden"
          }
        },
        {
          "name": "Cancel Order (Admin, Manager ONLY)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:3001/api/orders/1",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "orders", "1"]
            },
            "description": "RBAC TEST: Member will get 403 Forbidden"
          }
        },
        {
          "name": "Get My Orders (All Roles)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:3001/api/orders/my-orders",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "orders", "my-orders"]
            }
          }
        },
        {
          "name": "Get All Orders (Admin, Manager - Filtered)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:3001/api/orders",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "orders"]
            },
            "description": "Admin sees all. Manager sees only their country."
          }
        },
        {
          "name": "Get Order by ID (All Roles)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:3001/api/orders/1",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "orders", "1"]
            }
          }
        }
      ]
    },
    {
      "name": "Payment Methods (Update = Admin ONLY)",
      "item": [
        {
          "name": "Get My Payment Method",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:3001/api/payment-methods",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "payment-methods"]
            }
          }
        },
        {
          "name": "Create Payment Method (All Roles)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"cardNumber\": \"1234567812345678\",\n  \"cardHolderName\": \"Test User\",\n  \"expiryDate\": \"12/25\",\n  \"cvv\": \"123\"\n}"
            },
            "url": {
              "raw": "http://localhost:3001/api/payment-methods",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "payment-methods"]
            }
          }
        },
        {
          "name": "Update Payment Method (Admin ONLY)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"cardNumber\": \"8765432187654321\",\n  \"cardHolderName\": \"Updated Name\",\n  \"expiryDate\": \"06/26\",\n  \"cvv\": \"456\"\n}"
            },
            "url": {
              "raw": "http://localhost:3001/api/payment-methods",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "payment-methods"]
            },
            "description": "RBAC TEST: Manager/Member will get 403 Forbidden"
          }
        },
        {
          "name": "Delete Payment Method (Admin Only)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:3001/api/payment-methods",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3001",
              "path": ["api", "payment-methods"]
            }
          }
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "token",
      "value": "",
      "type": "string"
    },
    {
      "key": "baseUrl",
      "value": "http://localhost:3001/api",
      "type": "string"
    }
  ]
}